@{
    ViewBag.Title = "Index";
    var countrieName = ViewBag.countrieName;
}

<link href="~/Content/Style/style.css" rel="stylesheet" />
<link href="~/Content/Style/main.css" rel="stylesheet" />
<link href="~/Content/Style/display.css" rel="stylesheet" />
<link href="~/Content/Style/DeviceInput.css" rel="stylesheet" />
@*<link href="~/Content/Style/cusel.css" rel="stylesheet" />*@
@*<link href="~/Content/Style/CheckedStyle.css" rel="stylesheet" />*@
<link href="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.5.7/css/jsplumbtoolkit-defaults.css" rel="stylesheet" />
@*<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">*@
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<div id="leftDiv">
    <!-- Information about device -->
    <div id="deviceInfo">
        <ul id="menu">
            <!-- Device name -->
            <li>
                <span id="DevName">Device </span>

                <div id="deviceNameGroup" style="display:none; margin-top:1px;">
                    <input class="deviceInput inputField gradient" id="add_group_name" placeholder="Add Group Name" value="" type="text" hidefocus="true" style="outline: none; color: white; width:69%;">
                    <button type="button" class="btn btn-default" id="add_group" style="width:29% ;height: 20px;">Add Group</button>
                    <ul id="deviceName" class="devInfo" style="display:block"></ul>
                </div>
            </li>
            <!-- List of available interfaces -->
            <li>
                <span id="countrie">Countries</span>
                <ul id="countries" class="devInfo">
                    <li class="countries">
                        Countrie
                    </li>
                </ul>
            </li>
            <!-- List of available displays -->
            <li>
                <span id="tower_menu">Tower</span>
                <ul id="tower_drag" class="devInfo">
                    <li class="tower">
                        Tower
                    </li>
                </ul>
            </li>
            <input type="button" id="clear_diagram" name="clear" value="Clear Diagram" class="btn">
            <input type="button" id="start_log" name="log" value="Log" class="btn">

            <input type="button" id="open_map" name="map" value="Map" class="btn">
            <input type="button" id="_preset_diagram" name="" value="Preset" class="btn">

            <div id="add_device_partial"></div>
            <div id="preset_group_name" style="display:none">
                <ul class="Type typeSelect" id="diagram_list_view" style="height:38px;">
                    <li style="width:77%;" id="diagramPresetList">
                        <span class="type" id="Type" style=" background: linear-gradient(to bottom, rgb(17, 17, 17) 0%,rgba(84, 84, 84, 0.25) 32%,rgba(61,61,61,1) 64%,rgba(19, 19, 19, 0.29) 100%);">
                            <input type="text" name="presetName" class="presetName Text" id="preset_name_txt" placeholder="Preset Name" style="width: 94%; margin-left: -18px;background: linear-gradient(to bottom, rgb(17, 17, 17) 0%,rgba(84, 84, 84, 0.25) 32%,rgba(61,61,61,1) 64%,rgba(19, 19, 19, 0.29) 100%);" autocomplete="off">
                        </span>
                        <span class="arrow" style="margin-top: -20px;background: -webkit-linear-gradient(top, rgba(17,17,17,1) 0%,rgba(84,84,84,1) 32%,rgba(61,61,61,1) 64%,rgba(19,19,19,1) 100%);width:20px;">
                            <img src="/image/arrow_drop_down_white.png" width="100%" height="100%" alt="arrow" title="arrow">
                        </span>
                    </li>
                    <input type="button" id="preset_save_diagram" value="Save" class="btn" style="height: 22px; width: 22%; line-height: 6px; margin-top: -34px; margin-left: 79%; background: -webkit-linear-gradient(top, rgba(17,17,17,1) 0%,rgba(84,84,84,1) 32%,rgba(61,61,61,1) 64%,rgba(19,19,19,1) 100%);">
                </ul>
                <ul class="preset_group_list_remove" id="preset_group_list_remove" style="width: 14.3%;z-index: 1;display: none; margin-left: 5px; margin-top: -10px; border: none;">
                    <div id="interva_parti" class="preset_diagram_list_remove">

                    </div>
                </ul>
            </div>

</div>
    <div id="settingsDiv">
    </div>
</div>

<div id="mainDiv" name="mainDiv">

</div>

<div id="load_walk" name="Load">
    <img src="/image/loading.gif" id="load" alt="" title="Wplease Wait...">
</div>
<ul class='remove-menu' style="display:none;position:absolute">
    <li data-action="RemoveDevice">Remove Device</li>
</ul>

<ul class='remove-tower-menu' style="display:none;position:absolute">
    <li data-action="RemoveTower">Remove Tower</li>
</ul>
<!-- Modal -->
<div id="myModal" class="modal fade col-lg-12" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content device_setting_style">
            <div class="modal-header" style="height:20px; margin-top:-5px;background: url(/image/comment-bg2.png) repeat;">
                <span class="header" id="device_settings_name">Tower</span>
                <div style="margin-top:-8px;margin-left:160px;">
                    <input class="deviceInput inputField gradient" name="description_value_search" id="description_value_search" placeholder="Search" value="" type="text" hidefocus="true" style="outline: none; color: white;width:155px;">
                    <button type="button" class="btn btn-default btn-sm" id="walk_search_click" style="width: 29px;height: 20px; margin-left: -3px">
                        <span class="glyphicon glyphicon-search" style="margin-top: -3px; margin-left: -2px"></span>
                    </button>
                </div>
                <button type="button" class="close" id="modal_hiden" data-dismiss="modal">&times;</button>
            </div>

            <div class="titileGroup" style="height:21px; margin-top:1px;">
                <table>
                    <tr>
                        <td style="width:0%;">
                            <input class="deviceInput inputField gradient port_ip" id="tower_ip" placeholder="IP" value="" type="text" hidefocus="true" style="color: #b8c0c8; font-size:12px; width:150px; margin-top:-5px;">
                        </td>
                        <td style="width:1%;">
                            <input class="deviceInput inputField gradient port_ip" id="tower_port" placeholder="Port" value="161" type="text" hidefocus="true" style="margin-left:5px; color: #b8c0c8; font-size:12px; width:60px;margin-top:-5px;">
                        </td>
                        <td id="select_version" style="width:8%;">
                            <ul class="select_version" id="" style=" min-width: 54px; min-height: 18px;padding: 4px; width: 60px; margin-left:5px;">
                                <li>
                                    <span class="type" value="" id="walk_version">V2</span><span class="arrow" style=" height:19px;">
                                        <img src="/image/arrow_drop_down_white.png" width="100%" height="100%" alt="arrow" title="arrow">
                                    </span>
                                </li>
                            </ul>
                            <ul class="select_list_version" id="select_list_version" style="width:26px; display: none;height:60px; margin-left:17px; z-index:1;">
                                <div id="interva_partial" class="walk_list_version" style="width:42px;margin-left:-12px;">
                                    <li style="margin-top:-1px;" value="V1">V1</li>
                                    <li style="margin-top:-1px;" value="V2">V2</li>
                                    <li style="margin-top:-1px;" value="V3">V3</li>
                                </div>
                            </ul>
                        </td>
                        <td style="width:6%;">
                            <span class="version_settings" id="version_setting" style="margin-top: 3px; position: absolute"><img src="/Icons/pignon.png" alt="Version Settings" title="Version Settings" style="width:17px; height:17px;" data-toggle="modal" data-target="#VersionModal" /></span>
                        </td>
                        <td style="width:4.5%;">
                            <ul id="timButtons">
                                <li><input type="button" id="walk_send" value="Walk" class="btn" style="height:20px;margin-left:5px; width:52px;margin-top:-3px;"></li>
                            </ul>
                        </td>
                        <td style="width:7.8%;">
                            <div class="input_styled checklist pull-left" style="margin-top:-2px;position:absolute; height:20px;">
                                <div class="rowCheckbox walk_check">
                                    <div class="custom-checkbox" id="">
                                        <input id="walk_checked" type="checkbox" value="" hidefocus="true" style="outline: none;" class="gradient">
                                        <label id="walk_checked_add" style="background-size:19px;"></label>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td class="adapterInput" id="preset_add_remove" style="width:12%">
                            <ul class="Type typeSelect" style="height: 22px;width: 101px;min-width:46px;">
                                <li>
                                    <span class="type" id="Type">
                                        <input type="text" name="presetName" class="presetName Text" id="preset_name" placeholder="Preset Name" style="width:88%;margin-top: -5px; margin-left: -5px; border:none;" autocomplete="off">
                                    </span>
                                    <span class="arrow">
                                        <img src="/image/arrow_drop_down_white.png" width="100%" height="100%" alt="arrow" title="arrow">
                                    </span>
                                </li>
                            </ul>
                            <ul class="TypeList typeDropDownList" id="preset_list_remove" style="width:101px; display: none; z-index:1;">
                                <div id="interva_partial" class="preset_list_remove">

                                </div>
                            </ul>
                        </td>
                        <td style="width:16.4%;">
                            <ul id="timButtons">
                                <li><input type="button" id="preset_save" value="Save" class="btn" style="height:20px; width:52px;line-height:6px;margin-top:-3px;"></li>
                            </ul>
                        </td>
                        <td style="width:5%">
                            <div class="input_styled checklist pull-left" style="margin-top:-6px; height:20px;">
                                <div class="rowCheckbox map_check_all" style="margin-top:3px;">
                                    <div class="custom-checkbox" id="">
                                        <input name="map_checked" id="map_checked_all" type="checkbox" value="" hidefocus="true" style="outline: none;" class="gradient">
                                        <label id="map_checked_add_all" value="" class="" style="background-size:19px;"></label>
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td style="width:14%;">
                            <div class="input_styled checklist pull-left" style="margin-top:-6px;height:20px;">
                                <div class="rowCheckbox log_check_all" style="margin-top:3px;">
                                    <div class="custom-checkbox" id="">

                                        <input name="log_checked" id="log_checked_all" type="checkbox" value="" hidefocus="true" style="outline: none;" class="gradient">
                                        <label id="log_checked_add_all" value="" class="" style="background-size:19px;"></label>

                                    </div>
                                </div>
                            </div>
                        </td>
                        @* ///////////////////////////////////////////////////////////////////////////                            *@
                        <td class="adapterInput" id="inerval_add_remove" style="width:13%;">
                            <ul class="Type typeSelect" style="height: 22px;width: 101px;min-width:46px;">
                                <li>
                                    <span class="type" id="Type">
                                        <input type="text" class="Text" id="interval_number" placeholder="Interval Add" style="width:88%;margin-top: -5px; margin-left: -5px; border:none;" autocomplete="off">
                                    </span>
                                    <span class="arrow">
                                        <img src="/image/arrow_drop_down_white.png" width="100%" height="100%" alt="arrow" title="arrow">
                                    </span>
                                </li>
                            </ul>
                            <ul class="TypeList typeDropDownList" id="interval_list_remove" style="width: 101px; display: none; z-index:1;">
                                <div id="interva_partial" class="interval_list_remove">

                                </div>
                            </ul>
                        </td>
                        <td style="width:10%;">
                            <ul id="timButtons">
                                <li><input type="button" id="interval_add" value="Add" class="btn" style="height:20px; width:52px;line-height:6px; margin-top:-3px;"></li>
                            </ul>
                        </td>
                    </tr>
                </table>
            </div>
            <ul class='custom-menu' style="display:none;">
                <span style="font-size: 11px;margin-left:2px;">GPS Select</span>
                <li data-action="Yes">Yes</li>
                <li data-action="No">No</li>
            </ul>
            <div class="titileGroup" style="height:21px;margin-left:1px;">
                <table style="table-layout: fixed;width: 100%">
                    <tr class="streamsInfo" id="header_device">
                        <td style="width:25%;">
                            <div class="descriptionDiv">Name</div>
                        </td>
                        <td style="width:40%;">
                            <div class="descriptionDiv">Description</div>
                        </td>
                        <td style="width:25%;">
                            <div class="descriptionDiv">Value</div>
                        </td>
                        <td style="width:5%;">
                            <div class="descriptionDiv">Map</div>
                        </td>
                        <td style="width:5%;">
                            <div class="descriptionDiv">Log</div>
                        </td>
                        <td style="width:13%;">
                            <div class="descriptionDiv">Scanning Interval</div>
                        </td>
                        <td style="width:10%;">
                            <div class="descriptionDiv">Set</div>
                        </td>
                        <td style="width:11.5%;">
                            <div class="descriptionDiv">Get</div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="modal-body" id="device_settings">
            </div>
        </div>

    </div>
</div>


<!-- Modal  SET -->
<div class="modal fade" id="SetModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content setModal">
            <div class="modal-body">
                <div class="titileGroup" style="margin-left: -13px; margin-top: -13px; width:106%;">
                    <table>
                        <tr class="streamsInfo" id="header_device">
                            <td width="10%;">
                                <div class="descriptionDiv">Description</div>
                            </td>
                            <td width="90%;">
                                <div class="descriptionDiv" id="set_description"></div>
                            </td>
                        </tr>
                        <tr class="streamsInfo" id="header_device">
                            <td width="10%;">
                                <div class="descriptionDiv">OID</div>
                            </td>
                            <td width="90%;">
                                <div class="descriptionDiv" id="set_oid"></div>
                            </td>
                        </tr>
                        <tr class="streamsInfo" id="header_device">
                            <td width="10%;">
                                <div class="descriptionDiv">Value</div>
                            </td>
                            <td width="90%;">
                                <div class="descriptionDiv" id="set_value"></div>
                            </td>
                        </tr>
                        <tr class="streamsInfo" id="header_device">
                            <td width="10%;">
                                <div class="descriptionDiv">DataType</div>
                            </td>
                            <td width="90%;">
                                <div class="descriptionDiv" id="set_datatype"></div>
                            </td>
                        </tr>
                        <tr class="streamsInfo" id="header_device">
                            <td style="width:10%;">
                                <div class="descriptionDiv">Set Value</div>
                            </td>
                            <td style="width:90%;">
                                <input type="text" class="form-control" id="set_send_value">
                            </td>
                        </tr>
                    </table>
                </div>
                <div style="margin-left:325px; margin-top:3px;">
                    <button type="button" class="btn btn-info" id="SendSet" data-dismiss="modal" style="width:50px; height:22px;line-height:9px; font-size:11px; ">Send</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" style="width:50px; height:22px; line-height:9px; font-size:11px;">Close</button>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Modal  Version -->
<div class="modal fade" id="VersionModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content versionModal" style="margin-left:20%; margin-top:20%;">
            <div class="modal-body">
                <div class="titileGroup" style="margin-left: -13px; margin-top: -13px; width:110%;">
                    <table>
                        <tr class="streamsInfo" id="header_device">
                            <td style="width:10%;">
                                <div class="descriptionDiv">Read Community</div>
                            </td>
                            <td style="width:90%;">
                                <input type="text" class="form-control" id="read_community" style="color: white;background-color: #515862" value="public">
                            </td>
                        </tr>
                        <tr class="streamsInfo" id="header_device">
                            <td style="width:10%;">
                                <div class="descriptionDiv">Write Community</div>
                            </td>
                            <td style="width:90%;">
                                <input type="text" class="form-control" id="write_community" style="color:white;background-color: #515862" value="private">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>


<div class="modal fade" id="IPModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content setModal" style="width:330px;height:33px;">
            <div class="modal-body">
                <div class="titileGroup" style="margin-left: -13px; margin-top: -13px; width:106%;">
                    <table>
                        <tr class="streamsInfo" id="header_device">
                            <td width="5%;">
                                <div class="descriptionDiv">IP</div>
                            </td>
                            <td style="width:80%;">
                                <input type="text" class="form-control" id="ip_address">
                            </td>
                            <td width="10%">
                                <div style=" margin-top:3px;">
                                    <button type="button" class="btn btn-info" id="add_device_inf" data-dismiss="modal" data-toggle="modal" style="width:50px; height:22px;line-height:9px; font-size:11px; ">add</button>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal  DeviceUnknow -->
<div class="modal fade" id="existingDevice" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content existingDevice" style=" max-height: 100px;max-width: 350px;background: url(/image/comment-bg2.png) repeat;">
            <div class="modal-body">
                <div class="titileGroup">
                    <table>
                        <thead>
                            <tr>
                                <th style="font-size:18px;">
                                    These data are available in the database of the data , This requires a lot of time, do you wish to fill in the information?
                                </th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div style="margin-left:275px; margin-top:3px;">
                    <table>
                        <thead>
                            <tr>
                                <td style="position: absolute; margin-left: -61px;">
                                    <button type="button" class="btn btn-info" id="SendFill" data-dismiss="modal" style="width:50px; height:22px;line-height:9px; font-size:11px; ">Yes</button>
                                </td>
                                <td>
                                    <button type="button" class="btn btn-default" id="notTrapFill" data-dismiss="modal" style="width:50px; height:22px; line-height:9px; font-size:11px;">No</button>
                                </td>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>
@*</div>*@


<script>
    //var counter;
    var idTarget, title;
    $(document).ready(function () {

        $('.devInfo').hide();

        window.onload = loadDiagram();

        $(window).on("beforeunload", function (e) {
            //  saveDiagram();
        });

        //$('#countrie').click(function () {
        //    $("#countries").animate({ height: 'toggle', opacity: 'toggle' }, 300);
        //});
        //$('#tower_menu').click(function () {
        //    $("#tower_drag").animate({ height: 'toggle', opacity: 'toggle' }, 300);
        //});
        $('#countries li').draggable({
            helper: 'clone',
            revert: 'invalid'
        });
        $('.tower').draggable({
            helper: 'clone',
            revert: 'invalid'
        });
            

        //    function foo() {
        //        $('.foo').each(function () {
        //            //Making dropped elements draggable again
        //            $(this).draggable({
        //                //containment: $(this).parent(),
        //                stack: '.foo',
        //                grid: [10, 10],
        //                drop: function (event, ui) {
        //                    var pos = ui.draggable.offset(), dPos = $(this).offset();
        //                },
        //                drag: function () {
        //                    //jsPlumb.addToDragSelection($('.foo'));
        //                    var draggedItemId = $(this).attr('id');
        //                    $('.contextmenu').hide();
        //                    $(this).css({ 'z-index': '11' });
        //                    $(".class" + draggedItemId).css({ 'z-index': '15' });
        //                    //saveDiagram();
        //                },
        //                stop: function () {
        //                    var draggedItemId = $(this).attr('id');
        //                    $(this).css({ 'z-index': '0' });
        //                    $(".class" + draggedItemId).css({ 'z-index': '10' });
        //                    if ($(this).position().left < 0) {
        //                        $(this).css({ 'left': '0' });
        //                    }
        //                    if ($(this).position().top < 0) {
        //                        $(this).css({ 'top': '0' });
        //                    }
        //                    saveDiagram();
        //                }
        //            });
        //        });
        //    }

        //    var xCoordinate = 0;
        //    var yCoordinate = 0;
        //    var elem;
        //    var diagramLenght = $('.foo').length;
        //    $("#mainDiv").droppable({
        //        drop: function (ev, ui) {

        //            //if (!ui.draggable.hasClass('foo') && !ui.draggable.hasClass('display')) {
        //            var pos = ui.draggable.offset(), dPos = $(this).offset();
        //            var droppedTop = ui.position.top - $(this).offset().top + $('#mainDiv').scrollTop();
        //            var droppedLeft = ui.position.left - $(this).offset().left + $('#mainDiv').scrollLeft();
        //            var ids = $(this).attr("id");

        //            if (!ui.draggable.hasClass('foo') && ui.draggable.hasClass('countries')) {
        //                diagramLenght = $('.foo').length;
        //                var Class = ui.draggable.attr("class");
        //                title = ui.draggable.text().trim();
        //                var item = $('<table class="foo elementTable ' + Class + '" name="' + title + '" id="' + (diagramLenght + 1) + '" style="left: ' + (droppedLeft + 4) + 'px; top: ' + (droppedTop - 1) + 'px;"><tr class="tableHeader"><th class="thClass"><span style="margin-left:25px;" class="header' + (diagramLenght + 1) + '">' + title + '</span><span class="settings"><span id="state' + (diagramLenght + 1) + '"style="display:none">State</span><img src="/Icons/pignon.png" width="17px" height="17px" alt="Settings" title="Settings" /></span></th></tr><tr><td class="add' + (diagramLenght + 1) + '"><span class="addList' + (diagramLenght + 1) + '"></span></td></tr></table>');
        //                $(this).append(item);
        //                diagramLenght++;
        //                foo();
        //                saveDiagram();
        //            }
        //            if (!ui.draggable.hasClass('foo') && ui.draggable.hasClass('tower')) {
        //                diagramLenght = $('.foo').length;
        //                var Class = ui.draggable.attr("class");
        //                title = ui.draggable.text().trim();
        //                var item = $('<table class="foo elementTable device_list_name' + (diagramLenght + 1) + ' ' + Class + ' name="' + title + '" id="' + (diagramLenght + 1) + '" style="left: ' + droppedLeft + 'px; top: ' + droppedTop + 'px;"><tr class="tableBody tableHeader"  id="tower_' + (diagramLenght + 1) + '"><th class="thClass"><span style="margin-left:22px;" class="header' + (diagramLenght + 1) + '">' + title + (diagramLenght + 1) + '</span><span class="GpsSetting" id="GpsSetting"><img src="/Icons/pignon.png" width="17px" height="17px" alt="Settings" title="Settings" /></span><span class="minimized" id="minimized"><img src="/image/arrow_drop_down_white.png" width="17px" height="17px" alt="Settings" title="Minimize" id="minimizedImg' + (diagramLenght + 1) + '"/></span></th></tr><tr><td class="add' + (diagramLenght + 1) + '"><ul id="deviceAdd' + (diagramLenght + 1) + '" name="dropDivs"class="ui-droppable"></ul></td></tr></table>');
        //                $(this).append(item);
        //                diagramLenght++;
        //                foo();
        //                addPoints();
        //                saveDiagram();
        //            }

        //            $(".tower").droppable({
        //                containment: '.foo',
        //                drop: function (ev, ui) {
        //                    //diagramLenght = $('.foo').length;
        //                    var con = $('#tower_' + $(this).attr("id")).attr("class");
        //                    if (!ui.draggable.hasClass('foo') && !ui.draggable.hasClass('display') && ~con.indexOf("jtk-connected")) {
        //                        var pos = ui.draggable.offset(), dPos = $(this).offset();
        //                        var droppedTop = ui.position.top - $(this).offset().top + $('#mainDiv').scrollTop();
        //                        var droppedLeft = ui.position.left - $(this).offset().left + $('#mainDiv').scrollLeft();

        //                        if (!ui.draggable.hasClass('foo') && ui.draggable.hasClass('device_list')) {
        //                            var Class = ui.draggable.attr("class");
        //                            idTarget = ev.target.id;
        //                            title = ui.draggable.text().trim(35);
        //                            var height = $(".add" + idTarget).height();
        //                            var lenght = $('#dropDivs').length;
        //                            var id = $('.foo').length;

        //                            if (title.length > 35) {
        //                                var titleName = title.substr(0, title.length - (title.length - 31)) + '...';
        //                            }
        //                            else {
        //                                titleName = title;
        //                            }
        //                            droppedTop = height;
        //                            var item = $('<table class="foo elementTable tableBodyTower tower_name' + (id + 1) + '" ' + Class + '" name="' + title + '" id="' + (id + 1) + '" title="tower_' + idTarget + '" style="left: ' + 3 + 'px; top: ' + droppedTop + 'px;min-width: 245px;"><tr class="tableBodyTowers tableHeader" style="display:inline-table" id="towerDevice' + (idTarget) + '_' + (id + 1) + '"><th class="thClass"><span value="' + title + '" class="device_header' + (id + 1) + '">' + titleName + '</span><span class="device_settings"><img src="/Icons/pignon.png" width="17px" height="17px" alt="Settings" title="Settings"data-toggle="modal" data-target="#myModal" /></span></th></tr></table>');
        //                            $(".add" + idTarget).height(height + 35);
        //                            $(".add" + idTarget).append(item);
        //                            $('#IPModal').css("display", "block");
        //                            $('#IPModal').css("opacity", "1");
        //                            $('#IPModal').css("margin-top", "" + dPos.top + "px");
        //                            $('#IPModal').css("margin-left", "" + dPos.left - 100 + "px");
        //                            diagramLenght++;
        //                            saveDiagram();
        //                        }
        //                    }
        //                }
        //            });
        //        }
        //    });

        //    $('body').on('click tounched', '#add_device_inf', function () {
        //        $('#IPModal').css("display", "none");
        //        $('#IPModal').css("opacity", "0");
        //        IPaddress = $('#ip_address').val();
        //        towerID = "tower_" + idTarget;
        //        deviceName = title;
        //        towerName = $('.header' + idTarget).text();
        //        $.post("/DeviceGroup/TowerDeviceInformation", { IPaddress: IPaddress, towerID: towerID, deviceName: deviceName, cityID: cityID, towerName: towerName }, function () {
        //            $('#ip_address').val("");
        //        }, 'json');
        //    });

    });

</script>
